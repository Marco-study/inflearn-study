# 22/12/22) μ¤ν”„λ§ ν•µμ‹¬ μ›λ¦¬ μ΄ν•΄1 : κ΄€μ‹¬μ‚¬ λ¶„λ¦¬μ™€ DI

## μΆ‹μ€ κ°μ²΄μ§€ν–¥ μ„¤κ³„μ 5κ°€μ§€ μ›μΉ™ μ μ©

### SRP

<aside>
π’΅ ν•λ‚μ ν΄λμ¤λ” ν•λ‚μ μ±…μ„λ§ κ°€μ Έμ•Ό ν•λ‹¤.

</aside>

- κµ¬ν„ κ°μ²΄λ¥Ό μƒμ„±ν•κ³  μ—°κ²°ν•λ” μ±…μ„μ€ `AppConfig`κ°€ λ‹΄λ‹Ή
- ν΄λΌμ΄μ–ΈνΈ κ°μ²΄λ” μ‹¤ν–‰ν•λ” ν•λ‚μ μ±…μ„λ§ λ‹΄λ‹Ή

### DIP

<aside>
π’΅ μ¶”μƒν™”μ— μμ΅΄ν•΄μ•Όμ§€ κµ¬μ²΄ν™”μ— μμ΅΄ν•λ©΄ μ•λλ‹¤. β†’ μμ΅΄μ„± μ£Όμ…μ„ ν†µν•΄ μ΄ μ›μΉ™μ„ λ”°λ¥Έλ‹¤.

</aside>

- ν΄λΌμ΄μ–ΈνΈ μ½”λ“κ°€ μ¶”μƒν™” μΈν„°νμ΄μ¤μ—λ§ μμ΅΄ν•λ„λ΅ μ½”λ“λ¥Ό μ‘μ„±ν–λ‹¤. β†’ DIP
- `AppConfig`κ°€ ν΄λΌμ΄μ–ΈνΈκ°€ μμ΅΄ν•λ” μΈν„°νμ΄μ¤μ κµ¬ν„μ²΄λ¥Ό μ£Όμ…ν•΄μ¤€λ‹¤.

### OCP

<aside>
π’΅ μ†ν”„νΈμ›¨μ–΄ μ”μ†λ” ν™•μ¥μ—λ” μ—΄λ ¤μμΌλ‚ λ³€κ²½μ—λ” λ‹«ν€ μμ–΄μ•Ό ν•λ‹¤.

</aside>

- ν΄λΌμ΄μ–ΈνΈκ°€ μμ΅΄ν•λ” μΈν„°νμ΄μ¤μ κµ¬ν„μ²΄κ°€ λ³€κ²½λμ–΄λ„ ν΄λΌμ΄μ–ΈνΈμ μ½”λ“λ” λ³€κ²½ μ—†μ΄ `AppConfig`λ§ λ³€κ²½ν•΄μ¤λ„ λλ‹¤. β†’ OCP

## IoC, DI, μ»¨ν…μ΄λ„

### μ μ–΄μ μ—­μ „ (IoC : Inversion of Control)

- κΈ°μ΅΄μ—λ” κµ¬ν„ κ°μ²΄κ°€ μμ΅΄ν•λ” κ°μ²΄λ¥Ό μ§μ ‘ μƒμ„±ν•κ³  μ‹¤ν–‰ν–λ‹¤.
    - μ¦‰, κµ¬ν„ κ°μ²΄κ°€ ν”„λ΅κ·Έλ¨μ μ μ–΄ νλ¦„μ„ μ¤μ¤λ΅ μ΅°μΆ…ν–λ‹¤.
- `AppConfig`κ°€ λ“±μ¥ν•λ©΄μ„ κµ¬ν„ κ°μ²΄λ” μ‹¤ν–‰ν•λ” μ—­ν• λ§ λ‹΄λ‹Ήν•λ‹¤. ν”„λ΅κ·Έλ¨μ μ μ–΄ νλ¦„μ€ `AppConfig`κ°€ λ‹΄λ‹Ήν•λ‹¤.
- μ΄λ ‡κ² ν”„λ΅κ·Έλ¨μ μ μ–΄ νλ¦„μ„ κµ¬ν„ κ°μ²΄κ°€ μ§μ ‘ μ μ–΄ν•λ” κ²ƒμ΄ μ•„λ‹λΌ μ™Έλ¶€μ—μ„ κ΄€λ¦¬ν•λ” κ²ƒμ„ **μ μ–΄μ μ—­μ „**μ΄λΌκ³  ν•λ‹¤.

### μμ΅΄κ΄€κ³„ μ£Όμ…

- μ •μ μΈ ν΄λμ¤ μμ΅΄κ΄€κ³„
    - ν΄λμ¤κ°€ μ‚¬μ©ν•λ” `import` μ½”λ“λ§ λ³΄κ³  μμ΅΄κ΄€κ³„λ¥Ό μ‰½κ² νλ‹¨ν•  μ μλ‹¤.
    - μ• ν”λ¦¬μΌ€μ΄μ…μ„ μ‹¤ν–‰ν•μ§€ μ•μ•„λ„ λ¶„μ„ν•  μ μλ‹¤.
    - κµ¬ν„ κ°μ²΄κ°€ μ–΄λ μΈν„°νμ΄μ¤μ— μμ΅΄ν•λ”μ§€ μ• μ μλ‹¤. (ν•μ§€λ§ μ–΄λ κµ¬ν„μ²΄μ— μμ΅΄ν•λ”μ§€λ” μ• μ μ—†λ‹¤.)
- λ™μ μΈ κ°μ²΄ μΈμ¤ν„΄μ¤ μμ΅΄κ΄€κ³„
    - μ• ν”λ¦¬μΌ€μ΄μ…μ μ‹¤ν–‰ μ‹μ μ— μ‹¤μ  μƒμ„±λ κ°μ²΄ μΈμ¤ν„΄μ¤μ μ°Έμ΅°κ°€ μ—°κ²°λ μμ΅΄κ΄€κ³„
- μ• ν”λ¦¬μΌ€μ΄μ… μ‹¤ν–‰ μ‹μ μ— μ™Έλ¶€μ—μ„ μ‹¤μ  κµ¬ν„ κ°μ²΄λ¥Ό μƒμ„±ν•κ³  ν΄λΌμ΄μ–ΈνΈμ— μ „λ‹¬ν•΄μ„ ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„μ μ‹¤μ  μμ΅΄κ΄€κ³„κ°€ μ—°κ²°λλ” κ²ƒμ„ **μμ΅΄κ΄€κ³„ μ£Όμ…(DI)** μ΄λΌκ³  ν•λ‹¤.
- κ°μ²΄ μΈμ¤ν„΄μ¤λ¥Ό μƒμ„±ν•κ³ , κ·Έ μ°Έμ΅°κ°’μ„ μ „λ‹¬ν•΄μ„ μ—°κ²°λλ‹¤.
- μμ΅΄κ΄€κ³„ μ£Όμ…μ„ ν†µν•΄ ν΄λΌμ΄μ–ΈνΈ μ½”λ“λ¥Ό λ³€κ²½ν•μ§€ μ•κ³  ν΄λΌμ΄μ–ΈνΈκ°€ νΈμ¶ν•λ” μΈν„°νμ΄μ¤μ κµ¬ν„μ²΄λ¥Ό λ³€κ²½ν•  μ μλ‹¤.
- μμ΅΄κ΄€κ³„ μ£Όμ…μ„ μ‚¬μ©ν•λ©΄ μ •μ μΈ ν΄λμ¤ μμ΅΄κ΄€κ³„λ¥Ό λ³€κ²½ν•μ§€ μ•κ³ , λ™μ μΈ κ°μ²΄ μΈμ¤ν„΄μ¤ μμ΅΄κ΄€κ³„λ¥Ό μ‰½κ² λ³€κ²½ν•  μ μλ‹¤.

### DI μ»¨ν…μ΄λ„

- κ°μ²΄λ¥΄ μƒμ„±ν•κ³  κ΄€λ¦¬ν•λ©΄μ„ μμ΅΄κ΄€κ³„λ¥Ό μ—°κ²°ν•΄μ£Όλ” κ°μ²΄

## μ¤ν”„λ§μΌλ΅ μ „ν™ν•κΈ°

```jsx
@Configuration
public class AppConfig {
	@Bean
	public OrderService orderService() {
		return new OrderServiceImpl(memberRepository(), discountPolicy());
	}
}
```

- `@Configuration`
    - μ• ν”λ¦¬μΌ€μ΄μ…μ μ„¤μ • μ •λ³΄, μ–΄λ–»κ² κµ¬μ„±λμ–΄ μλ”μ§€ μ •λ³΄λ¥Ό λ‹΄κ³  μλ” ν΄λμ¤λΌκ³  μ§€μ •
- `@Bean`
    - μ¤ν”„λ§ μ»¨ν…μ΄λ„μ— λ“±λ΅

### μ‚¬μ©

```jsx
ApplicationContext applicationContext = new AnnotationConfigApplicationContext(AppConfig.class);
MembmerService memberService = applicationContext.getBean("memberService", MemberService.class);
```

- `ApplicationContext`
    - μ¤ν”„λ§ μ»¨ν…μ΄λ„
    - μ¤ν”„λ§ λΉλ“¤μ„ κ΄€λ¦¬ν•΄μ¤€λ‹¤.
- `AppConfig`μ— μλ” μ„¤μ •μ •λ³΄λ¥Ό λ°”νƒ•μΌλ΅ κ°μ²΄λ“¤μ„ μ¤ν”„λ§ μ»¨ν…μ΄λ„μ— λΉμΌλ΅ λ“±λ΅ν•λ‹¤.

### μ¤ν”„λ§ μ»¨ν…μ΄λ„

- `ApplicationContext`κ°€ μ¤ν”„λ§ μ»¨ν…μ΄λ„μ΄λ‹¤.
- μ¤ν”„λ§ μ»¨ν…μ΄λ„λ” `@Configuration`μ΄ λ¶™μ€ ν΄λμ¤λ¥Ό μ„¤μ • μ •λ³΄λ΅ μ‚¬μ©ν•λ‹¤. μ—¬κΈ°μ„ `@Bean` μ–΄λ…Έν…μ΄μ…μ΄ λ¶™μ€ λ©”μ„λ“λ¥Ό λ¨λ‘ νΈμ¶ν•μ—¬ λ°ν™λ κ°μ²΄λ¥Ό μ¤ν”„λ§ μ»¨ν…μ΄λ„μ— λ“±λ΅ν•λ‹¤. μ΄λ ‡κ² μ¤ν”„λ§ μ»¨ν…μ΄λ„μ— λ“±λ΅λ κ°μ²΄λ¥Ό μ¤ν”„λ§ λΉμ΄λΌκ³  ν•λ‹¤.
- μ¤ν”„λ§ λΉμ€ `@Bean` μ–΄λ…Έν…μ΄μ…μ΄ λ¶™μ€ λ©”μ„λ“μ λ©”μ„λ“ λ…μ„ μ¤ν”„λ§ λΉμ μ΄λ¦„μΌλ΅ μ‚¬μ©ν•λ‹¤.

<br>
<br>
*κΉ€μν•λ‹μ μ¤ν”„λ§ ν•µμ‹¬ μ›λ¦¬ - κΈ°λ³ΈνΈ*

μƒλ΅μ΄ κµ¬μ΅°μ™€ ν• μΈ μ •μ±… μ μ© ~ μ¤ν”„λ§μΌλ΅ μ „ν™ν•κΈ° (5κ°)
